<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/ccc2850fdc.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.1.js"
        integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/public/style.css">
    <title>
        <%= title %> 
    </title>
</head>
<style>

  p.hide {
  display: none;
  }

  p.show {
    display: block;
  }

</style>
<body>
    <form action="/newPass" method="post">
        <div class="box-log-in box-forgetPassword bg-white p-4 text-center border border-2 rounded m-auto">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header mb-4 border-bottom">
                        <div class="sign-in-header">
                            <h5 class="modal-title mb-3">enter your new password and reenter it for confirm</h5>
                        </div>
                    </div>
                    <div class="modal-body mb-4 border-bottom pb-3">
                        <div class="form-floating mb-3">
                            <input type="password" name="newPass" class="form-control" id="password" autofocus>
                            <label for="floatingInput">new password</label>
                        </div>
                        <p class="text-danger hide">your password must be contain a lowercase and uppercase letters and digits and specifice symbol</p>
                        <div class="form-floating mb-3">
                            <input type="password" name="reNewPass" class="form-control" id="cPassword">
                            <label for="floatingInput">confirm password</label>
                        </div>
                        <p class="text-danger hide">your confirm password is not mutch</p>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-primary new-account-button" type="submit">submit</button>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
    <script>
      
      const checkPassword = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[#\$%&@]).+$/g

      $('#password').on('input', function(e) {
        let value = new String(e.target.value)
        const noti = $(this).parent().next()
        if (noti.length != "" && !value.match(checkPassword)) {
          noti.addClass('show')
        } else {
          noti.removeClass('show')
        }
      })

      $('#cPassword').on('input', function(e) {
        let value = new String(e.target.value)
        const noti = $(this).parent().next()
        if ($('#password').val() != value) {
          noti.addClass('show')
        } else {
          noti.removeClass('show')
        }
      })

      setInterval( () => {
        if ($('#password').val() == $('#cPassword').val()) {
          $('.btn').prop('disabled', false)
        }else {
          $('.btn').prop({
            disabled: true
          })
        }
      }, 500)

    </script>
</body>
</html>